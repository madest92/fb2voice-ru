# fb2voice-ru üìöüîä

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö –∫–Ω–∏–≥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ FB2 –≤ –∞—É–¥–∏–æ–∫–Ω–∏–≥–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ MP3 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏ Silero –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìñ **–ü–∞—Ä—Å–∏–Ω–≥ FB2** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ FictionBook 2.0 —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (—Ç–æ–º–∞, –≥–ª–∞–≤—ã, –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã)
- üé§ **–°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–≤–æ–π –º–æ–¥–µ–ª–∏ Silero TTS (20+ –¥–∏–∫—Ç–æ—Ä–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–æ–º)
- üéµ **–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∞—É–¥–∏–æ** - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ MP3 —Å ID3 –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ (–æ–±–ª–æ–∂–∫–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ, –∞–≤—Ç–æ—Ä)
- ‚ö° **–ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≥–ª–∞–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º multiprocessing
- üìä **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ö–æ–¥–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ
- üåê **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ä–∏–º—Å–∫–∏—Ö —Ü–∏—Ñ—Ä, —á–∏—Å–µ–ª, —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π, —Ñ–æ–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –ª–∞—Ç–∏–Ω–∏—Ü—ã

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- CUDA (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ GPU)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ò–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/madest92/fb2voice-ru.git
cd fb2voice-ru

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -e .
pip install -e .[torch]
# –ò–ª–∏ –µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ —Å CPU –±–µ–∑ GPU
pip install -e .[torch] --index-url https://download.pytorch.org/whl/cpu
```

### –ó–∞–ø—É—Å–∫ –≤ Docker

```bash
# –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞ c CUDA
docker build -t fb2voice-ru .
# –ò–ª–∏ —Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞ —Ç–æ–ª—å–∫–æ —Å CPU(–æ–±—Ä–∞–∑ –≤–µ—Å–∏—Ç –º–µ–Ω—å—à–µ, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ–ª—å—à–µ)
docker build --build-args TORCH_CPU=1 -t fb2voice-ru .

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—É–¥–∏–æ–∫–Ω–∏–≥–∏
docker run --rm -v ~/my_books:/books -v ~/.cache/torch/hub:/home/fb2voice/.cache/torch/hub fb2voice-ru /books/my-book.fb2 --speaker baya
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞

```bash
# –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä —Å –¥–∏–∫—Ç–æ—Ä–æ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (Eugene)
fb2voice-ru book.fb2

# –° –≤—ã–±–æ—Ä–æ–º –¥–∏–∫—Ç–æ—Ä–∞
fb2voice-ru book.fb2 --speaker baya
```

### –ò–∑ Python –∫–æ–¥–∞

```python
from fb2voice_ru import Book2Voice

# –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞
converter = Book2Voice('path/to/book.fb2')

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–Ω–∏–≥–µ
print(converter.get_title())
print(converter.get_authors())
print(converter.get_annotation())

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—É–¥–∏–æ–∫–Ω–∏–≥–∏
converter.gen(speaker='eugene')
```

## –í—ã—Ö–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç

–ê—É–¥–∏–æ–∫–Ω–∏–≥–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ:

```bash
Author Name/
‚îî‚îÄ‚îÄ Book Title/
    ‚îú‚îÄ‚îÄ 01 - Chapter Title.mp3
    ‚îú‚îÄ‚îÄ 02 - Chapter Title.mp3
    ‚îî‚îÄ‚îÄ ...
```

–ò–ª–∏

```bash
Author Name/
‚îî‚îÄ‚îÄ Book Title/
    ‚îú‚îÄ‚îÄ 01 Part title
        ‚îú‚îÄ‚îÄ 01 - Chapter Title.mp3
        ‚îú‚îÄ‚îÄ 02 - Chapter Title.mp3
        ‚îî‚îÄ‚îÄ ...
    ‚îú‚îÄ‚îÄ 02 Part title
        ‚îú‚îÄ‚îÄ 01 - Chapter Title.mp3
        ‚îú‚îÄ‚îÄ 02 - Chapter Title.mp3
        ‚îî‚îÄ‚îÄ ...
    ‚îî‚îÄ‚îÄ ...    
```
